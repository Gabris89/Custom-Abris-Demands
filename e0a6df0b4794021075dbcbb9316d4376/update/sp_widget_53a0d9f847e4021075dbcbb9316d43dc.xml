<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {
  /* widget controller */
  var c = this;
};
]]></client_script>
        <controller_as>c</controller_as>
        <css>.panel {
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 20px;
    background-color: #fff;
    box-shadow: 0 1px 1px rgba(0,0,0,0.05);
}

.panel-heading {
    padding: 10px 15px;
    border-bottom: 1px solid transparent;
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
}

.panel_title {
    margin-top: 0;
    margin-bottom: 0;
    font-size: 16px;
}

.panel-body {
    padding: 15px;
}

.list-group-item {
    padding: 10px 15px;
    border: none;
}

.list-group-item a {
    color: #333;
    text-decoration: none;
}

.list-group-item a:hover {
    color: #000;
}

.text-muted {
    color: #777;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>abris-project-number</id>
        <internal>false</internal>
        <link/>
        <name>Ábris widget - Project Number</name>
        <option_schema/>
        <public>true</public>
        <roles>admin</roles>
        <script><![CDATA[(function() {
    data.title = options.title || 'My Project';
    data.project = getProjectRecord();

    function getProjectRecord() {
        var project = {};

        // Ellenőrizzük, hogy a sys_id csak egyetlen projektre vonatkozzon
        var projectId = gs.getUser().getID(); // Itt a projekt azonosítóját lekérdezzük a jelenlegi felhasználótól vagy egyéb módon
        var prjList = new GlideRecord('pm_project');
        prjList.addQuery('sys_id', '23d8ff0847e8021075dbcbb9316d4314'); // Csak a megadott projektet kérdezzük le
        prjList.query();

        if (prjList.next()) {
            project.sys_id = prjList.sys_id.toString();
            project.number = prjList.number.toString();
            project.short_description = prjList.short_description.toString();
        }

        return project;
    }
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-02-21 14:58:26</sys_created_on>
        <sys_id>53a0d9f847e4021075dbcbb9316d43dc</sys_id>
        <sys_mod_count>19</sys_mod_count>
        <sys_name>Ábris widget - Project Number</sys_name>
        <sys_package display_value="Custom Ábris Demand" source="x_1143687_valami">e0a6df0b4794021075dbcbb9316d4376</sys_package>
        <sys_policy/>
        <sys_scope display_value="Custom Ábris Demand">e0a6df0b4794021075dbcbb9316d4376</sys_scope>
        <sys_update_name>sp_widget_53a0d9f847e4021075dbcbb9316d43dc</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-02-21 16:16:04</sys_updated_on>
        <template><![CDATA[<div class="panel panel-default">
    <div class="panel-heading">
        <h1 class="panel_title">
            {{data.title}}
        </h1>
    </div>
    <div class="panel-body">
        <a href="sp?id=form&table=pm_project&sys_id={{data.project.sys_id}}">
            {{data.project.number}} - 
            <span class="text-muted"><small>{{data.project.short_description}}</small></span>
        </a>
    </div>
</div>]]></template>
    </sp_widget>
</record_update>
