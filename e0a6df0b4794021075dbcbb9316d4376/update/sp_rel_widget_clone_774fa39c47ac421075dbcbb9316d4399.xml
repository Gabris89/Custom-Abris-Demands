<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_rel_widget_clone">
    <sp_rel_widget_clone action="INSERT_OR_UPDATE">
        <child display_value="Copy of Project Weekly Status">f74faf5847ac421075dbcbb9316d43c6</child>
        <cloned>2024-02-20 13:03:07</cloned>
        <last_validated>2024-02-20 13:03:07</last_validated>
        <parent display_value="Project Weekly Status">6500359337331200277826877e41f1bc</parent>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;sp_widget&gt;&lt;category/&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $log /*, StatusReportService*/) {
  // widget controller
  var c = this;
  /*updateDateLabels();
  function updateDateLabels() {
	for (var x in c.data.dates) {	
		c.data.dates[x] = moment(c.data.dates[x]).format('ll').split(',')[0];
	}
  }
  function clearStatues() {
	$scope.data.statuses.overall = [];
	$scope.data.statuses.cost = [];
	$scope.data.statuses.schedule = [];
	$scope.data.statuses.scope = [];
	$scope.data.statuses.resource = [];
	$scope.data.dates = [];
  }
	
  $scope.getStatusesFromLastReport = function(statusReportId) {
	  StatusReportService.getStatusesFromLastReport(statusReportId, $scope.data.limit).then(function(data) {
		  $log.log(data);
		  clearStatues();
		  for ( var i=0; i &lt; data.data.length; i++ ) {
			$scope.data.statuses.overall.push({icon: getIcon(data.data[i].overall)});
			$scope.data.statuses.cost.push({icon: getIcon(data.data[i].cost)});		
			$scope.data.statuses.resource.push({icon: getIcon(data.data[i].resource)});
			$scope.data.statuses.schedule.push({icon: getIcon(data.data[i].schedule)});
			$scope.data.statuses.scope.push({icon: getIcon(data.data[i].scope)});
			$scope.data.dates.push(data.data[i].date);
		  }
		  updateDateLabels();
	  });
  };
	
  $scope.$on('status_date_selected', function(event, data) { 
	  $log.log("status_date_selected event received: " + data);
	  $scope.getStatusesFromLastReport(data);
  });

	function getIcon(value) {
		if ( value == 'green' )
			return 'fa-check-circle';
		else if ( value == 'yellow' )
			return 'fa-minus-circle';
		else
			return 'fa-exclamation-circle';
	}*/
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.icon-success-circle {&amp;#13;
  color: $brand-success;&amp;#13;
}&amp;#13;
.icon-not-started-circle{&amp;#13;
  color: $brand-warning;&amp;#13;
}&amp;#13;
&amp;#13;
.icon-warning-circle {&amp;#13;
  color: $brand-danger;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
.panel-heading {&amp;#13;
  position: relative;&amp;#13;
}&amp;#13;
&amp;#13;
.panel-body {&amp;#13;
  padding-top: 5px;&amp;#13;
  padding-bottom: 0px;&amp;#13;
}&amp;#13;
&amp;#13;
.status-hr {&amp;#13;
  /*padding-top: 2px;*/&amp;#13;
  text-align: center;&amp;#13;
  font-size: 14px;&amp;#13;
  line-height: 2.8;&amp;#13;
}&amp;#13;
&amp;#13;
.status-column {&amp;#13;
  padding: 5px;&amp;#13;
  text-align: center;&amp;#13;
&amp;#13;
  i {&amp;#13;
    padding-left: 3px;&amp;#13;
  }&amp;#13;
&amp;#13;
}&amp;#13;
&amp;#13;
.service {&amp;#13;
&amp;#13;
  .fa {&amp;#13;
    margin-top: 10px;&amp;#13;
  	margin-bottom: 10px;&amp;#13;
    font-size: 18px;    &amp;#13;
    &amp;#13;
    .tooltiptext {&amp;#13;
        visibility: hidden;&amp;#13;
        width: 450px;&amp;#13;
        background-color: $gray-base;&amp;#13;
        color: $label-color;&amp;#13;
        text-align: left;&amp;#13;
        border-radius: 6px;&amp;#13;
        padding: 5px 0;&amp;#13;
        position: absolute;&amp;#13;
        z-index: 1;&amp;#13;
        font-size: 14px;&amp;#13;
        overflow: hidden;&amp;#13;
    }&amp;#13;
  }&amp;#13;
}&amp;#13;
&amp;#13;
.tooltiptext {&amp;#13;
    visibility: hidden;&amp;#13;
    width: 200px;&amp;#13;
    background-color: $gray-base;&amp;#13;
    color: $label-color;&amp;#13;
    text-align: left;&amp;#13;
    border-radius: 6px;&amp;#13;
    padding: 5px 0;&amp;#13;
    position: absolute;&amp;#13;
    z-index: 1;&amp;#13;
    font-size: 14px;&amp;#13;
    overflow: visible;&amp;#13;
}&amp;#13;
&amp;#13;
.fa:hover .tooltiptext {&amp;#13;
    visibility: visible;&amp;#13;
}&amp;#13;
&amp;#13;
.margin_override {&amp;#13;
  margin-left: -30em; &amp;#13;
}&amp;#13;
.status-hr, .status-header {&amp;#13;
  padding: 5px;&amp;#13;
}&amp;#13;
.panel-heading, .panel-heading .panel-heading-col, .panel-body {&amp;#13;
  padding: 5px !important;&amp;#13;
}&amp;#13;
.panel-heading .row, .service {&amp;#13;
  margin-right: 0;&amp;#13;
  margin-left: 0;&amp;#13;
}&amp;#13;
.panel-title {&amp;#13;
  line-height: 1.4&amp;#13;
}&amp;#13;
.icon {&amp;#13;
  font-size: 15px;&amp;#13;
  margin: 5px 0;&amp;#13;
  display: inline-block;&amp;#13;
}&amp;#13;
.comment-tooltip .tooltip-inner {&amp;#13;
  max-width:750px;&amp;#13;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;project-weekly-status&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;Project Weekly Status&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	// populate the 'data' object
	// e.g., data.table = $sp.getValue('table');
	
	function getIcon(value) {
		if ( value == 'green' )
			return 'icon-success-circle';
		else if ( value == 'yellow' )
			return 'icon-not-started-circle';
		else
			return 'icon-warning-circle';
	}
	
	var s = new PmProjectStatusReport();
	data.limit = 11;
	var endDate = $sp.getParameter('sysparm_status_date') || (new GlideDate()).getDisplayValue();
	
	var statuses = s.getStatuses($sp.getParameter('sysparm_sys_id'), endDate, data.limit);

	data.categories = [];
	data.categories.push({label: gs.getMessage('Overall'), name: 'overall'});
	data.categories.push({label: gs.getMessage('Schedule'), name: 'schedule'});
	data.categories.push({label: gs.getMessage('Cost'), name: 'cost'});
	data.categories.push({label: gs.getMessage('Resources'), name: 'resources'});
	data.categories.push({label: gs.getMessage('Scope'), name: 'scope'});
		
	data.statuses = {};
	data.statuses.overall = [];
	data.statuses.cost = [];
	data.statuses.schedule = [];
	data.statuses.scope = [];
	data.statuses.resources = [];
	data.dates = [];
	
	for ( var i=0; i &lt; statuses.length; i++ ) {
		data.statuses.overall.push({icon: getIcon(statuses[i].overall), comment: statuses[i].comments});
		data.statuses.cost.push({icon: getIcon(statuses[i].cost), comment: statuses[i].cost_comments});		
		data.statuses.resources.push({icon: getIcon(statuses[i].resources), comment: statuses[i].resources_comments});
		data.statuses.schedule.push({icon: getIcon(statuses[i].schedule), comment: statuses[i].schedule_comments});
		data.statuses.scope.push({icon: getIcon(statuses[i].scope), comment: statuses[i].scope_comments});
		data.dates.push(statuses[i].date);
	}
	//gs.info("cost_comment: " + (new JSON()).encode(data.statuses.cost));
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-06-09 10:19:53&lt;/sys_created_on&gt;&lt;sys_id&gt;6500359337331200277826877e41f1bc&lt;/sys_id&gt;&lt;sys_mod_count&gt;162&lt;/sys_mod_count&gt;&lt;sys_name&gt;Project Weekly Status&lt;/sys_name&gt;&lt;sys_package display_value="Project Portfolio Suite Portal" source="com.snc.pps_portal"&gt;91edd36a4700021075dbcbb9316d4380&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_6500359337331200277826877e41f1bc&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-14 17:55:07&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div class="panel panel-{{::c.options.color}} b"&gt;
  &lt;div class="panel-heading"&gt;   
    &lt;div class="hidden-xs row"&gt;
      &lt;span class="col-sm-3 panel-heading-col"&gt;
        &lt;div class="panel-title"&gt;${Status History}&lt;/div&gt;
      &lt;/span&gt;
      &lt;span ng-repeat="date in data.dates | limitTo: 9 track by $index" class="col-sm-1 status-hr panel-title" ng-bind="date"&gt;&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
  &lt;div class="hidden-xs panel-body" ng-repeat="category in c.data.categories"&gt;
    &lt;div class="row service"&gt;
		&lt;div class="col-sm-3 bold status-header"&gt;	
              &lt;h5 ng-bind="::category.label"&gt;&lt;/h5&gt;  
	    &lt;/div&gt;
      &lt;!--
      &lt;div ng-repeat="n in [0,1,2,3,4,5,6,7,8,9,10] track by $index" class="col-sm-1 status-column"&gt;
        &lt;span class="fa" ng-class="c.data.statuses[category.name][n].icon"&gt;
	       &lt;span class="tooltiptext" ng-if="c.data.statuses[category.name][n].comment &amp;&amp; n&lt;=5" ng-bind-html="c.data.statuses[category.name][n].comment"&gt;&lt;/span&gt;
          &lt;span class="tooltiptext margin_override" ng-if="c.data.statuses[category.name][n].comment &amp;&amp; n&gt;5" ng-bind-html="c.data.statuses[category.name][n].comment"&gt;&lt;/span&gt;
        &lt;/span&gt;    
      &lt;/div&gt;
	--&gt;
      &lt;div ng-repeat="status in c.data.statuses[category.name] | limitTo: 9 track by $index" class="col-sm-1 status-column"&gt;
        &lt;span class="icon" ng-class="status.icon" tooltip-class="comment-tooltip" tooltip-append-to-body="true" uib-tooltip-html="'{{status.comment}}'" role="tooltip"&gt;
        &lt;/span&gt;    
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;</payload>
        <sys_class_name>sp_rel_widget_clone</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-02-20 13:03:07</sys_created_on>
        <sys_id>774fa39c47ac421075dbcbb9316d4399</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>f74faf5847ac421075dbcbb9316d43c6</sys_name>
        <sys_package display_value="Custom Ãbris Demand" source="x_1143687_valami">e0a6df0b4794021075dbcbb9316d4376</sys_package>
        <sys_policy/>
        <sys_scope display_value="Custom Ãbris Demand">e0a6df0b4794021075dbcbb9316d4376</sys_scope>
        <sys_update_name>sp_rel_widget_clone_774fa39c47ac421075dbcbb9316d4399</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-02-20 13:03:07</sys_updated_on>
    </sp_rel_widget_clone>
</record_update>
